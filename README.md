# Straibot: AI Analytics Assistant for Power BI

- Straibot is a LangChain-powered AI assistant built with Streamlit that enables users to query and analyze Power BI datasets using natural language.
- It acts as an intelligent intermediary, translating user questions into Data Analysis Expressions (DAX) queries, executing them against a live Power BI service, and synthesizing the results into conversational answers.

---

# Features and Core Components

-Straibot functions as a LangChain Agent that connects a Large Language Model (LLM) with the Power BI Tool for data access.

| Component                                | Description                              | Role in the Application Flow                                                                                                                                    |
| ---------------------------------------- | ---------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Streamlit Interface (`app_v1.py`)**    | The user-friendly web interface.         | Handles user chat, displays results, manages session state, and loads dynamic configurations such as FAQs and Key Insights.                                     |
| **LangChain Agent**                      | The core reasoning engine (ReAct Agent). | Receives the user's question, interprets the dataset schema and history, formulates the appropriate DAX query, and determines when to present the final answer. |
| **Power BI Toolkit**                     | The specialized data access tool.        | Executes DAX queries generated by the agent directly against the configured Power BI Dataset ID using Azure credentials.                                        |
| **Dataset Config (`dataset_config.py`)** | Central configuration file.              | Stores the Power BI Dataset ID, schema context (used by the LLM), and application-specific content like FAQs and Key Insights.                                  |
| **Secrets (`.streamlit/secrets.toml`)**  | Secure credentials storage.              | Contains Tenant ID, Client ID/Secret for Power BI authentication, and the OpenAI/LLM Foundry API Key.                                                           |

---

# Project Structure

| File/Folder               | Description                                                                                                                |
| ------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| `app_v1.py`               | Main application file containing the Streamlit UI, LangChain agent setup, toolkit configuration, and authentication logic. |
| `dataset_config.py`       | Configuration file defining Power BI connection parameters, schema context, and app-specific content.                      |
| `requirements.txt`        | Lists all necessary Python dependencies (Streamlit, LangChain, Azure, etc.).                                               |
| `.streamlit/`             | Hidden directory used by Streamlit for app configurations.                                                                 |
| `.streamlit/secrets.toml` | Stores sensitive credentials like API keys and Power BI authentication info.                                               |
| `venv/`                   | Recommended virtual environment for isolated dependencies.                                                                 |
| `.gitignore`              | Specifies files and folders to be ignored by Git (e.g., `venv/`, `.streamlit/secrets.toml`).                               |
| `Validator.html`          | Sample HTML demonstrating how to construct and pass authentication tokens via URL query strings.                           |

---

# Deployment Guide

1. Prerequisites

Before starting, ensure you have the following:

- Python 3.9+
- Git
- Azure/Microsoft Entra ID Application credentials (Tenant ID, Client ID, Client Secret) with permission to read Power BI data.
- Power BI Dataset ID for the target report.
- OpenAI/LLM Foundry API Key

2. Environment Setup

- Clone the Repository and Create a Virtual Environment
```bash
git clone https://github.com/itsmechandan/Straibot.git
cd Straibot
python -m venv venv
```
- Activate the Virtual Environment
  On Linux/macOS:
```bash
source venv/bin/activate
```
  On Windows:
```bash
venv\Scripts\activate
```
- Install Dependecies:
```bash
pip install -r requirements.txt
```
3. Configuration:

Set Up Secrets
Create a .streamlit/secrets.toml file and add your credentials:

```bash
[powerbi]
tenant_id = "YOUR_TENANT_ID"
client_id = "YOUR_CLIENT_ID"
client_secret = "YOUR_CLIENT_SECRET"
dataset_id = "YOUR_DATASET_ID"

[openai]
api_key = "YOUR_OPENAI_API_KEY"
```
4. Run the application:
```bash
Run the Application
```
---
# Notes

- Keep .streamlit/secrets.toml out of Git commits for security.
- Update your virtual environment regularly to maintain compatibility with new dependencies.
- The project can be deployed on Streamlit Cloud or Azure App Service with minimal configuration.
